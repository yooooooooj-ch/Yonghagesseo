<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ddak.yongha.mapper.BannerMapper">

    <!-- 배너 목록 조회 (활성화된 배너 목록) -->
    <select id="selectActiveBanners" resultType="com.ddak.yongha.vo.BannerVO">
        SELECT
            banner_no AS bannerNo,
            img_path AS imgPath,
            banner_index AS bannerIndex,
            start_date AS startDate,
            end_date AS endDate
        FROM Banner
        WHERE end_date >= SYSDATE
        ORDER BY banner_index
    </select>
    
    <!-- 배너 목록 조회 (전체 배너 목록) -->
    <select id="selectActiveBanners2" resultType="com.ddak.yongha.vo.BannerVO">
        SELECT
            banner_no AS bannerNo,
            img_path AS imgPath,
            banner_index AS bannerIndex,
            start_date AS startDate,
            end_date AS endDate
        FROM Banner
        ORDER BY banner_index
    </select>

    <!-- 배너 추가 -->
    <insert id="insertBanner" parameterType="com.ddak.yongha.vo.BannerVO">
		INSERT INTO Banner (banner_no, img_path, banner_index, start_date, end_date)
		VALUES (seq_banner_no.nextVal, #{imgPath}, #{bannerIndex}, #{startDate}, #{endDate})
	</insert>


    <!-- 배너 수정 -->
    <update id="updateBanner" parameterType="com.ddak.yongha.vo.BannerVO">
        UPDATE Banner
        SET img_path = #{imgPath},
            banner_index = #{bannerIndex},
            start_date = #{startDate},
            end_date = #{endDate}
        WHERE banner_no = #{bannerNo}
    </update>
    
    <!-- 배너 1개 조회 -->
    <select id="selectBannerByNo" parameterType="int" resultType="com.ddak.yongha.vo.BannerVO">
		SELECT
		banner_no AS bannerNo,
			img_path AS imgPath,
			banner_index AS bannerIndex,
			start_date AS startDate,
			end_date AS endDate
		FROM Banner
		WHERE banner_no = #{bannerNo}
	</select>

    <!-- 배너 삭제 (DB) -->
    <delete id="deleteBanner" parameterType="int">
        DELETE FROM Banner WHERE banner_no = #{bannerNo}
    </delete>

</mapper>
